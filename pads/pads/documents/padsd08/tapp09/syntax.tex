
\begin{figure}[t]
\[
\begin{array}{lll}
\multicolumn{3}{l}{\mbox{(host-language base types)}}\\ 
\multicolumn{3}{l}{\basety \ ::= \boolty \bnfalt \stringty \bnfalt \locty \bnfalt \timety \bnfalt \schedulety} \\
\\
\multicolumn{3}{l}{\mbox{(host-language types)}}\\ 
\multicolumn{3}{l}{\ty \ ::=\ \basety
\bnfalt \optionty{\ty}
\bnfalt \ty_1 * \ty_2
\bnfalt \ty_1 + \ty_2
\bnfalt \listty{\ty}
\bnfalt \ty_1 \arrow \ty_2
} \\
%% & \basety & \mbox{base types} \\
%% \bnfalt & \optionty{\ty} & \mbox{option types}\\
%% \bnfalt & \ty_1 * \ty_2 & \mbox{pair types} \\
%% \bnfalt & \ty_1 + \ty_2 & \mbox{sum types} \\
%% \bnfalt & \listty{\ty} & \mbox{list types}\\
%% % \bnfalt & \feedty{\ty} & \mbox{stream types}\\
%% \bnfalt & \ty_1 \arrow \ty_2 & \mbox{function types} \\
\\
\multicolumn{3}{l}{\mbox{(host-language values)}}\\ 
\multicolumn{3}{l}{\data \ ::=} \\
& \boolf \bnfalt \boolt & \mbox{booleans} \\
\bnfalt & \astring \bnfalt \loc \bnfalt \atime \bnfalt \schedule &
 \mbox{strings, locations, times, schedules} \\
\bnfalt & \none \bnfalt 
                           \some{\data} & \mbox{optional values}\\
\bnfalt & (\data_1,\data_2) & \mbox{pairs} \\
\bnfalt & \inl{\data} \bnfalt 
                           \inr{\data} & \mbox{sum values} \\
\bnfalt & 
%\nillist \bnfalt 
                           \conslist{\data_1}{\data_n} & \mbox{list values} \\
% & \bnfalt & \nilstream \bnfalt 
%                           \consstream{\data_1}{\data_2} & \mbox{stream values} \\

\bnfalt & \lambda x{:}\ty.\expression & \mbox{function values} \\
\\
\multicolumn{3}{l}{\mbox{(host-language expressions)}}\\ 
\multicolumn{3}{l}{\expression \ ::=}\\ 
& \generalvar & \mbox{variables} \\
\bnfalt & \data & \mbox{data values} \\
\bnfalt & \none \bnfalt 
              \some{\expression} & \mbox{option expressions}\\
%\bnfalt & (\expression_1,\expression_2) \bnfalt e.1 \bnfalt e.2 
%    & \mbox{pair expressions} \\
% & \bnfalt & \inl{\expression} \bnfalt 
%             \inr{\expression} & \mbox{sum expressions} \\
% & \bnfalt & \expression_1 \; \expression_2 & \mbox{application expression} \\
\bnfalt & ... & \mbox{more typed lambda expressions} \\
%\\
%\multicolumn{4}{l}{\mbox{(feed meta-data:  a subset of host language values)}}\\ 
%\multicolumn{4}{l}{\mbox{(a special location (\generatedloc) is used when data is created artificially)}}\\ 
\end{array}
\]
\caption{Host Language Syntax.}
\label{fig:host-language}
\end{figure}


\begin{figure}[t]
\[
\begin{array}{lll}
\multicolumn{3}{l}{\mbox{(feed types)}}\\ 
\multicolumn{3}{l}{\sigma \ ::= \tau \bnfalt \optionty{\tau} 
  \bnfalt \sigma_1 * \sigma_2
  \bnfalt \sigma_1 + \sigma_2
  \bnfalt \listty{\sigma}
}   \\  
\\
\multicolumn{3}{l}{\mbox{(core feed spec)}}\\ 
\multicolumn{3}{l}{\corefeed \ ::= }\\
& \{ \ \mathtt{src=}\    e_1;    & \mbox{source specification} \\
& \ \ \ \mathtt{sched=}\  e_2;    & \mbox{schedule specification}\\
& \ \ \ \mathtt{win=}\    e_3;    & \mbox{time-out window specification} \\
& \ \ \ \mathtt{pp=}\     e_4;    & \mbox{pre-processor} \\
& \ \ \ \mathtt{format=}\ e_5; \} & \mbox{format specification}\\ 
\\
\multicolumn{3}{l}{\mbox{(feed specs)}}\\ 
\multicolumn{3}{l}{\feed \ ::=}   \\  
% & x &  \mbox{feed variable} \\ %% no feed variables now
% & \bnfalt 
         & \mathtt{all}\ \corefeed & \mbox{all sources}\\ 
 \bnfalt & \mathtt{any}\ \corefeed & \mbox{one of multiple sources}\\ 
 \bnfalt & \emptyfeed & \mbox{empty feed} \\
 \bnfalt & \computed{e_1}{x}{e_2} & \mbox{computed feed} \\
 \bnfalt & \comprehensionfeed{e}{x}{\feed} & \mbox{feed comprehension} \\
 \bnfalt & \filterfeed{\feed}{e} & \mbox{filter feed} \\
 \bnfalt & \letfeed{x}{e_1}{\feed_2} & \mbox{let feed} \\
 \bnfalt & \feed_1 \unionfeed \feed_2 & \mbox{union feed} \\
 \bnfalt & \feed_1 \sumfeed \feed_2 & \mbox{sum feed} \\
 \bnfalt & (\feed_1, \feed_2) & \mbox{synchronous pair} \\
% & \bnfalt & \feed_1 cartesian \feed_2 & \mbox{cartesian pair -- use a symbol different from *} \\
% & \bnfalt & \feed_1 * \feed_2 & \mbox{continuous pair} \\
% & \bnfalt & \feed_1 {*}{*} \feed_2 & \mbox{local pair} \\
 \bnfalt & x{:}\feed_1 * \feed_2 & \mbox{dependent continuous pair} \\
 \bnfalt & x{:}\feed_1\, {*}{*} \, \feed_2 & \mbox{dependent local pair} \\
 \bnfalt &     \mathtt{foreach{*}}\; x \; 
    \mathtt{in}\; \feed_1 & \mbox{for each $x$ create continuous $\feed_2$} \\
 &   \quad \mathtt{create}\; \feed_2 \\
 \bnfalt &     \mathtt{foreach{*}{*}}\; x \; 
    \mathtt{in}\; \feed_1 & \mbox{for each $x$ update local $\feed_2$}\\
 &   \quad \mathtt{update}\; \feed_2 \\
%\foreachcreate{x}{\feed_1}{\feed_2} & \mbox{for each $x$ create continuous $F_2$} \\
% \bnfalt & \foreachupdate{x}{\feed_1}{\feed_2} & \mbox{for each $x$ create local $F_2$} \\
% & \bnfalt & \ppfeed{\feed}{e} & \mbox{preprocess (eg, unzip) data} \\
% & \bnfalt & \remap{\feed}{e} & \mbox{direct feed to different locations/times} \\
% & \bnfalt & \refeed{\feed}{e} & \mbox{adapt feed to new schedule; 
%                                               fill missing entries with ``None''} \\
% & \bnfalt & \stutterfeed{\feed}{e} & \mbox{stutter on new schedule} \\
 \bnfalt & [\feed \bnfalt x \leftarrow e ] & \mbox{list comprehension feed} \\
\end{array}
\]
\caption{Feed Language Syntax.}
\label{fig:syntax}
\end{figure}

