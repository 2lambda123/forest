
April 18, 2006 - Mary (PADX)

  o Updated mk/rules.mk and padsc/pads-glx/GNUmakefile to align with
    GODI-Galax configuration options.

    This is an improvement, because we now include Galax's
    configuration file in $(GALAX_HOME)/config/Makefile.galax, but
    there are still some hacks in padsc/pads-glx/GNUmakefile for PADX.
    See "HACK ALERT" in  padsc/pads-glx/GNUmakefile 

  o New Environment Variables!

    OCAML_BIN_DIR=/home/mff/godi/bin
    OCAML_LIB_DIR=//home/mff/godi/lib/ocaml
    GALAX_HOME=/home/mff/Galax-0.6.0-Linux/galax

  o pads/documents/sigmoddemo06 -- last minutes fixes for ACM. 

April 14, 2006 - Mary (PADX)
  o Realigned PADX data model with Galax data model

March 23, 2006 - Mary

  o Finished pads-accum.xsd and associated examples
    
    padsc/schemata/examles/ai.accum.xml contains XML representation of
    PADS accumulator output in padsc/schemata/examles/ai.accum.

    padsc/schemata/examles/ai.accum.xml validates against accumulator
    schema in padsc/schemata/pads-accum.xsd.
    
March 13, 2006 - Mary

  o Moved pads.xsd from libpglx/ to schemata/
    
    - Updated pp-ast-xschema-fn.sml to refer to new schemaLocation 

  o Added pads/padsc/schemata directory, contains:

    pads-xml.xsd : XML Schema for PADS-XML grammar (C dialect)
    pads-xml.xsd : XML Schema for PADS accumulator tool

  o Added pads/padsc/schemata/examples/, contains:

    {ai,sirius}.p.xml: complete translations of {ai,sirius}.p into XML
    dialect 

    ai.accum.xml: fragment of accumulator output in XML dialect

    GNUmakefile:  validates example files against schemata. 

March 2, 2006 - Bob
  o Fixed some bugs in the low-level numeric parsing routines.
    For example, float parsing was producing 0.0 for empty string (oops).
    Updated documentation for these routines in pads_internal.h
  o Changed documentation for Pstring2<number> -- no longer promises
      to return a particular min or max value on error, instead
      it promises to set errno as appropriate, which is what the
      the underlying numeric parsing functions do.

December 20, 2005 -Yitzhak
  Recursive types:
  o Added support for type parameters.
  o Added PADX support.
  o Modified copy to be deep copy. Was a pointer copy.
  o Added header info to recursive parse descriptors. 
    Pointer is now just a field of the pd.
  o Extended set of allowed recursive types to include Pstruct, 
    Punion, Popt, and Parray.
  o Removed syntactic support for Pdyn. Now it is only an internal 
    construct, used in implementation of Precur.
  Arrays:
  o Added support for special variable "current" in scope of element type
    of arrays. Therefore, an array element type can be parameterized by 
    the index of the current element.
  List description:
  o Added description of simple list to scratch. I plan to turn it into 
    another example usecase for recursive types.

December 15, 2005 - Mary
  o More alignment with Galax 0.6.0

November 30, 2005 - Mary

  o Merged with branch galax-0-6-0 to align Galax 0.6.0
    (See notes labeled BRANCH-galax-0-6-0 below)

  o Removed pads/padsc/examples/tests/ai.[ch], which were breaking
    regression tests.  They should only occur in gen/ directory. 

August 17, 2005 - Mary

  ** BRANCH-galax-0-6-0

  o PADX Alignment with Galax 0.6.0 development version
    ===================================================

    - Pads_dm :

      Added support for axis::node-test functions, which call 
      kth_named_child instead of kth_child + name functions.

      NB: Pads_dm is incomplete: It does not handle all of the XQuery
      node-tests; only name-test and the element() kind test, but
      that's OK for now.

    - Templates pglx_load/bulk/smart

      Added hard-wired initialization of query context to include:
        declare namespace padsns = "file:" ^ name-of-p-file 

      TODO: Pads compiler should generate the context file to be loaded by
      pglx_bulk/smart. 

    - examples/xml/regress

      Updated files to align w/ new base types
      Pip,Pdate*,Ptimestamp*,Ptime* types.

    - pglx.c
     
      Factorized GADS of replicated code in 
      #ty _ sndNode_typed_value,  _typed_value, _string_value

      Could use further improvement.

=======BEGIN BRANCH-galax-0-6-0=======
November 30, 2005 Mary

  o PADX Alignment with Galax 0.6.0 development version
    ===================================================

    - Added support for Camomile UTF library used by Galax:

      mk/rules.mk
      padsc/pads-glx/GNUmakefile

  o Experimental results for PLAN-X 2006 PADX paper
    ==============================================

    - padsc/examples/tests/GNUmakefile
      padsc/examples/xml/tests/GNUmakefile

      Added smart-node allocation hints as compile-time arguments and
      "linear" targets, which do not 

    - padsc/examples/tests/time_pads.sh
      padsc/include/template/timed_read.h

      Added alloc hints for dibbler and ai

    - padsc/pads-glx/pads_dm.h
      padsc/pads-glx/pads_dm.ml
      padsc/pads-glx/pads_dm.mli
      padsc/pads-glx/pads_dm_stub.c
  
      Added walkPadsDocument(item i) on O'Caml side that calls
      data-model tree-walking functions to measure cross-language API costs 

    - scripts/timing.sh

   o Smart node allocation hint : fixed bug in which allocation hint
     was not passed to allocator. 

     padsc/include/pglx-codegen-macros.h

   o Changed serialization to send to file, not a string, which did
     not scale!

     padsc/include/template/pglx_bulk_query.h
     padsc/include/template/pglx_load.h
     padsc/include/template/pglx_smart_query.h

August 17, 2005 - Mary

  ** BRANCH galax-0-6-0

  o PADX Alignment with Galax 0.6.0 development version
    ===================================================

    - Pads_dm :

      Added support for axis::node-test functions, which call 
      kth_named_child instead of kth_child + name functions.

      NB: Pads_dm is incomplete: It does not handle all of the XQuery
      node-tests; only name-test and the element() kind test, but
      that's OK for now.

    - Templates pglx_load/bulk/smart

      Added hard-wired initialization of query context to include:
        declare namespace padsns = "file:" ^ name-of-p-file 

      TODO: Pads compiler should generate the context file to be loaded by
      pglx_bulk/smart. 

    - examples/xml/regress

      Updated files to align w/ new base types
      Pip,Pdate*,Ptimestamp*,Ptime* types.

    - pglx.c
     
      Factorized GADS of replicated code in 
      #ty _ sndNode_typed_value,  _typed_value, _string_value

      Could use further improvement.

=======END BRANCH-galax-0-6-0=======
July 11, 2005 - Mary

  o PADS to XML Schema Mapping 
    ==========================

    - Updated mapping to support Pip,Pdate*,Ptimestamp*,Ptime* types.

      Required "conceptual" change to : 

        padsc/comp/ckit/src/ast/extensions/pads/base-ty-info.txt 

      to distinguish between external/parsed type, abstract/PADX type,
      and internal/rep type.  PADX Schema mapping is applied to
      abstract/PADX, not internal/rep type.

    - Isolated all PADX-specific functions for manipulating type
      name/field name, and for filtering out types/fields that are
      mapped in:

      padsc/comp/ckit/src/ast/extensions/pads/utils.sml   

      Includes a HACK to special-case C types that occur in PD structs.

    - Default output format for PADX timestamp set to "%Y-%m-%dT%H:%M:%S" in:
      padsc/include/pglx.h   


  o PADX Regression tests 
    =====================

    - Updated PADX regression tests to include PADS descriptions:
      format7, wsl, ai, dibbler_notrailer, dns

    To run PADX regression tests in padsc/examples/xml/tests
 
       make regress

    In addition to existing regressions ("load", "bulk", "smart"),
    there is a "schema" regression that runs the "load" regression
    then validates the output XML w.r.t. the corresponding XML
    schema. 

    See regression documentation in padsc/examples/xml/README. 

May 22, 2005 - Mary

  o Added mapping rules for PADS to XML Schema in :
    - pads/documents/pads-to-schema-mapping.txt
    - Implemented in: 
      comp/ckit/src/ast/pp/extensions/pads/pp-ast-xschema-fn.sml

      *** NB: Rules for Ptypedef are still not quite right ***

May 16, 2005 - Mary and Joel
  o Changed default writing of XML data from PADS so 
    that all elements other than <padsns:PSource> are
    in the empty namespace.
    padsc/libpads/pads.c
    padsc/include/pglx-macros.h

May 11, 2005 - Mary

  o Changed .xsd/data namespace to be file-system independent

April 26, 2005 - Mary

  o More support for XML Schema 

    - main.sml : 
      Moved definition of PDCI_source from generated-file.h
      to generated-file.c. 

    - pp-ast-xschema-fn.sml
      Removed elementFormDefault="qualified" -- all local element
      names are in default namespace.  Makes data easier to read. 

    - Changed padsc/include/templates/pglx_*.h to pass PDCI_source to
      Galax. 

April 19, 2005 - Mary

  o Support for XML Schema 
    - Updated pads.xsd to align w/ XML Schema 
    - Changed pglx_*.h templates to pass ".p" file to Galax so that
      generated data refers to correct ".p" file.

April 4, 2005 - Mary and Yitzhak
  o More on representation of <pd>
    - Isolated source of March 30 problems:

      In pads.c, _write2io functions have *side effect* of updating a
      value's rep when an error has occurred (effectively, this delays
      computing a default invalid value until the data is
      serialized/printed to output).

      The pglx.c, the _string_value and _typed_value functions
      delegate to _write2io functions for base types.  We call these
      functions for _all_ elements in the XML view including the
      PADS-only fields <length>, <pd> and subelements, etc.  And the
      rep should never change for these elements. 

      Solution: In pglx.c, call _write2io with idiom that guarantees
      rep will not be changed. 

March 30, 2005 - Mary
  o Representation of <pd>
    - In pglx.c
      Fixed insidious bug in node rep of text nodes : <pd> child was
      missing for bulk & smart text nodes 
    - PADX driver include/templates: 
      Fixed templates/pglx_*.h so that XML is output even when errors
      occur.
    - Regression tests
      In examples/xml/tests, "make regress" should now run without
      error, although those tests all run on error-free data files

January 24, 2005 - Mary

  o Changed rules.mk to fix incorrect definitions of cc/ld variables
    in rules.arch.darwin.ppc.mk. 

January 5, 2005 - Mary
  o Added XML "regression" test_xml target to pads/GNUmakefile

January 4, 2005 - Mary

  o Integrated PADS-Galax glue code into PADS code base.

    - Added pads/padsc/pads-glx source directory

    - Added pads/documents/{pads-glx-doc,pads-glx-talk} directories

    - Added new required environment variable GALAX_SRC to mk/rules.mk.
      Must point to galax source directory.

    - Added pads_glx target to pads/GNUmakefile : 
      Target is made when USE_GALAX=1

October 19, 2004 - Mary

  o Normalized occurrence of <pd> type for all P-types:
    <pd> is now _last_ child element 
    <pd> is only present if pd->nerr > 0
    Required changes to kth-child and path-walk functions in:
      padsc/comp/ckit/src/ast/extensions/pads/cnv-ext.sml
      padsc/comp/ckit/src/ast/extensions/pads/gen-galax-sig.sml
      padsc/comp/ckit/src/ast/extensions/pads/gen-galax.sml
      padsc/include/pglx-codegen-macros.h
      padsc/libpglx/path_walk.c
      padsc/libpglx/pglx.c

  o Updated regression tests

October 16, 2004 - Kathleen

A set of changes to support PADS+Gigascope

  o A couple of new include files
       A pads_gigascope.h
       A pads_gigascope_macros.h

  o GNUmakefiles and rules.mk: if GIGASCOPE_HOME is defined, then
    this becomes PADS_INSTALLROOT, and a -DFOR_GIGASCOPE flag
    is added to the compile options.  Also, FORCE_STATIC is set.
    GIGASCOPE_INCLUDES is set to the above include files.
    INSTALL_LIBDIR and INSTALL_INCDIR are now the target dirs for a
    'make install'.   install in libpads now also installs the ast
    library/libraries in INSTALL_LIBDIR (which does nothing if this
    is the same as the normal ast-ast/arch/<ARCH>/ 
       M rules.mk
       M GNUmakefile
       M padsc/GNUmakefile
       M padsc/include/GNUmakefile
       M padsc/libpads/GNUmakefile
       M padsc/libpglx/GNUmakefile

  o release.pl produces a tar file with a 'released' version of PADS.
    Currently its target use is Gigascope, so it replaces the checked in
    ast-zip/INIT packages with ast-ast/INIT packages to avoid
    building the compression libraries.  release.pl deletes files that
    should not be in the release, such as stuff that should remain internal
    to AT&T.  I may have missed some things.  It also replaces
    examples/tests/GNUmakefile with examples/tests/GNUmakefile.release.
    N.B. This means if you add a regression test that you think should
    be part of the release, you need to add it the corresponding rules
    to both GNUmakefile and GNUmakefile.release, AND you need to add
    the .c file to examples/tests/RELEASE_TESTS, which release.pl uses
    to figure out what data/test/regression files to keep.
     
       M scripts/release.pl
       R scripts/release/INIT.2003-10-31.tgz
       A scripts/release/INIT.2004-10-11.tgz
       R scripts/release/ast-ast.2003-10-31.tgz
       A scripts/release/ast-ast.2004-10-11.tgz

October 14, 2004 - Mary
  o Eliminated smart-node init call in pglx-codegen-macros.h that I
    don't understand that that trashes <pd> values. 

October 14, 2004 - Mary
  o Added clean regression results in examples/xml/regress

October 14, 2004 - Mary
  o Fixed XML representations of Parrays so that <pd> and <length>
    always follow <elt> elements. 

    - Required changes to several macros and generated code related to
      kth_childNamed and kth_child.

October 14, 2004 - Mary
  Dibbler example
  o Removed examples/p/{dibbler2.p,dibbler_manifest.p,dibbler_most_permissive.p}
  o Added examples/xml/tests/test_*_dibbler_notrailer
  o Added examples/data/dibbler.1 containing one record

  o Fixed bug in pglx_*.h templates : COPY_STRING must be defined in
    all template header files 

October 13, 2004 - Mary
  o Added examples/xml/README

October 12, 2004 - Mary
  PADS/Galax Interface:

  o scripts/INT_DO_SETENV.sh
    - Added arguments to package.cvs script, which did not work on
      Fedora

  o libpglx/ and include/templates/pglx*.h
    - Aligned with development version of Galax 

  o Regorganized padsc/examples/xml directory and installed regression
    tests.

    examples/xml:
	gen/	    Generated *.{h,c,xsd} files
	queries/    Example queries
	README	    
	regress/    Expected results for XML regression tests
	schema/	    PADS-specific XML schemas
	tests/	    Template *.[ch] files for testing 
	xml/	    Generated XML output

    Following directories are empty/unused but stuck in CVS:
        childrentest/
        data/  
	idltest/  
        yitzhak 

===============  PADS-GALAX ===============================================
19 October 2004 - Mary
  o Added pads-glx/doc directory

14 October 2004 - Mary
  o Pads_dm
    - Changed padsDocumentNode so that it always contains exactly one
      root element named <Psource>.

22 June 2004 - Yitzhak

  o In root directory:
      I've moved the files smart.c and smart.h to a new directory called smart.
      I've removed them from the root directory.
      I've also added a number of other new files to "smart". I will use smart 
      as my working directory until I'm ready to try integrating the changes 
      into the main pads src tree.

  o In api:
      I've modified the c api to support garbage collection of unreachable 
      nodereps.

  o In smart:
      Work-in-progress, as described above.

15 June 2004 - Yitzhak
  o Fixed new kth_child-based pads_dm implementation.
  o Modified the idl to treat result from kth_child as a nodeRep option. 
    Also added a type nodeRepOption, which will be treated differently by the 
    idl compiler than nodeRep.
    (Note: We use options becuase nodeRep is opaque and can't be tested for nullity.)
  o Added nodeRepOpt conversion functions to pads_dm_stub.c. These functions convert c nodeRep
    to ml "nodeRep option" and vice versa.
  o Added a debug targe to Makefile (plus some minor fixes).

10 June 2004 - Yitzhak
  o Added kth_child function to pads_c.idl and pads_pglx.c
  o Changed pads_dm.ml to use kth_child function

  o Updated api/README to more accurately reflect directory contents.
  o Removed root() function from pads_c.idl.
  o Created root.idl to contain root() function.
  o Modified pads_dummy.c to implement PGLX_generic_XXX functions rather 
    than the pads_c.h functions. Now, pads_pglx.c can work with both pads_dummy.c 
    and real PADS implementations.
  o Modified test_pads_c.c to use root.h.
  o Fixed Makefile so that pads-galax library is compiled identically whether 
    for testing or not.


8 June 2004 - Yitzhak and Mary and Bob
  o PADS Example compilation
    Added dependency in Makefile

  o  Updated TODO with a couple API fixes.

  o  Added new file ON_DEMAND for notes on on-demand parsing
      (includes notes on the need for a new way to do Identity testing).

  Testing

  o TEST=0 variable links without pads_dummy.o.
  o TEST must be set to one of 0 or 1.

  Pads_dm module:

  o Ancestor, descendent, etc. axes are implemented naively. Code
    taken from galax_dm.


7 June 2004 - Yitzhak and Mary

  Pads_dm module:

  o Re-align PADS-GALAX interface with current Galax abstract Dm module
 
  Makefile

  o Removed all references to byte-code compilation.  libpadsglxopt.{a,so} are
    native code libraries

  Testing

  o TEST=1 variable links pads_dummy.o to test libpadsglxopt
    independently of Pads generated libraries

  o Tested linking using test_pads_c_opt.  Uses TEST=1 and pads_dummy.c,
    which constructs simple XML document that simulates PADS library

23 November 2003 - Mary

  o Alignment with Nov'03 WD of Galax

===============  PADS-GALAX ===============================================
