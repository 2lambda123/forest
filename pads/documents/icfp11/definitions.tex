\newcommand{\todonote}[3]{% something has to be done!
  \typeout{TODO: #1 (\thepage) #2}\ifdraft
  {\textbf{#3}\marginpar{\raggedright\scriptsize{\textbf{#1: }#2}}}
  \else{}\fi
}
\newcommand{\Remark}[3]{% en passant
  \ifdraft%
  {\textbf{#3}\marginpar{\raggedright\scriptsize{(#1) \textit{#2}}}}%
  \else{#3}\fi
}

\newcommand{\reviewer}[1]{\ifdraft\textcolor{purple}{[\textbf{#1 --Reviewer}]}\fi}

\newcommand{\dpw}[1]{\Remark{dpw}{#1}{}}
\newcommand{\kf}[1]{\Remark{kf}{#1}{}}
\newcommand{\jnf}[1]{\Remark{jnf}{#1}{}}
\newcommand{\kz}[1]{\Remark{kz}{#1}{}}

% \newcommand{\dpw}[1]{}
% \newcommand{\kf}[1]{}
% \newcommand{\jnf}[1]{}
% \newcommand{\kz}[1]{}

\newcommand{\cut}[1]{}
\newcommand{\reminder}[1]{{\it #1 }}
\newcommand{\poplversion}[1]{#1}
\newcommand{\trversion}[1]{}


\newcommand{\appref}[1]{Appendix~\ref{#1}}
\newcommand{\secref}[1]{Section~\ref{#1}}
\newcommand{\tblref}[1]{Table~\ref{#1}}
\newcommand{\figref}[1]{Figure~\ref{#1}}
\newcommand{\listingref}[1]{Listing~\ref{#1}}
%\newcommand{\pref}[1]{{page~\pageref{#1}}}

\newcommand{\auxmaterials}{auxiliary PLDI materials~\cite{pldi-aux-materials}}

\newcommand{\eg}{{\em e.g.}}
\newcommand{\cf}{{\em cf.}}
\newcommand{\ie}{{\em i.e.}}
\newcommand{\etc}{{\em etc.\/}}
\newcommand{\naive}{na\"{\i}ve}
\newcommand{\role}{r\^{o}le}
\newcommand{\forte}{{fort\'{e}\/}}
\newcommand{\appr}{\~{}}

\newcommand{\filestore}{filestore}
\newcommand{\Filestores}{Filestores}
\newcommand{\filestores}{\filestore{}s}

\newcommand{\mkred}[1]{\textcolor{red}{#1}}

%\newcommand{\bftt}[1]{{\ttfamily\bfseries{}#1}}
\newcommand{\kw}[1]{\bftt{#1}}
\newcommand{\pads}{Pads}
\newcommand{\padshaskell}{Pads/Haskell}
\newcommand{\forest}{Forest}
\newcommand{\coral}{CoralCDN}
\newcommand{\fg}{\texttt{ForestGraph}}
\newcommand{\padx}{\textsc{padx}}
\newcommand{\ipads}{\textsc{ipads}}
\newcommand{\ir}{\textsc{IR}}
\newcommand{\padsl}{\textsc{padsl}}
\newcommand{\blt}{\textsc{blt}}
\newcommand{\ddc}{\textsc{ddc}}
\newcommand{\ddl}{\textsc{ddl}}
\newcommand{\C}{\textsc{C}}
\newcommand{\perl}{\textsc{Perl}}
\newcommand{\ml}{\textsc{ml}}
\newcommand{\smlnj}{\textsc{sml/nj}}
\newcommand{\java}{\textsc{java}}
\newcommand{\xml}{\textsc{xml}}
\newcommand{\html}{\textsc{html}}
\newcommand{\xquery}{\textsc{xquery}}
\newcommand{\datascript}{\textsc{datascript}}
\newcommand{\packettypes}{\textsc{packettypes}}
\newcommand{\erlang}{\textsc{Erlang}}
\newcommand{\graphviz}{\textsc{GraphViz}}
\newcommand{\template}{Template \haskell{}}
\newcommand{\haskell}{Haskell}


\newcommand{\totalcost}[2]{\textsc{Cost}(#1,#2)}
\newcommand{\costdescription}[1]{\textsc{CT}(#1)}
\newcommand{\normcostdescription}{\textsc{NCT}}
\newcommand{\costdata}[2]{\textsc{CD}(#2 \; | \; #1)}
\newcommand{\adc}[2]{\textsc{CD'}(#2 \; | \; #1)}
\newcommand{\cardt}{\textsc{Card}}
\newcommand{\costvar}[1]{\textsc{CV}(#1)}
\newcommand{\costchar}[1]{\textsc{CA}(#1)}
\newcommand{\coststring}[1]{\textsc{CS}(#1)}
\newcommand{\costint}[1]{\textsc{CI}(#1)}
\newcommand{\costparam}[1]{\textsc{CP}(#1)}
\newcommand{\costconst}[1]{\textsc{CC}(#1)}

\newcommand{\dibbler}{Sirius}
\newcommand{\ningaui}{Altair}
\newcommand{\darkstar}{Regulus}

%% \newcommand{\IParray}[4]{{\tt Parray} \; #1 \; \[#2, #3, #4\]}

\newcommand{\figHeight}[4]{\begin{figure}[tb]
	\centerline{
	            \epsfig{file=#1,height=#4}}
	\caption{#2}
	\label{#3}
	\end{figure}}

\newcommand{\myalt}{\ensuremath{\; | \;}}
\newcommand{\normal}[1]{\ensuremath{\bar{#1}}}
\newcommand{\relativee}[2]{\ensuremath{{\cal R}(#1 \; || \; #2)}}
\newcommand{\srelativee}[2]{\ensuremath{{\cal S}(#1 \; || \; #2)}}
\newcommand{\addh}[2]{\ensuremath{#1 \oplus #2}}

\newcommand{\irstruct}[1]{{\tt struct}\{#1\}}
\newcommand{\irunion}[1]{{\tt union}\{#1\}}
\newcommand{\irenum}[1]{{\tt enum}\{#1\}}
\newcommand{\irarray}[1]{{\tt array}\{#1\}}
\newcommand{\irarrayFW}[2]{{\tt arrayFW}\{#1\}[#2]}
\newcommand{\irswitch}[2]{{\tt switch}(#1)\{#2\}}
\newcommand{\iroption}[1]{{\tt option}\{#1\}}
\newcommand{\setof}[1]{\lsem #1 \rsem}
\newcommand{\goto}{\Rightarrow}
\newcommand{\Pvoid}{{\tt Pvoid}}
\newcommand{\Pempty}{{\tt Pempty}}
\newcommand{\sskip}{\hspace*{5mm}}
\newcommand{\shrink}{\vspace*{-4mm}}

%%%%%%%%%%
% THEORY %
%%%%%%%%%%
\newcommand{\us}{\ensuremath{\_\!\_}}
\newcommand{\defeq}{\ensuremath{\triangleq}}
\renewcommand{\bnfdef}{\ensuremath{\mathord{::=}}}
\newcommand{\slsh}{\ensuremath{\mathord{\textsf{/}}}}
\newcommand{\File}[1]{\ensuremath{\mathsf{File}~#1}}
\newcommand{\Dir}[1]{\ensuremath{\mathsf{Dir}~#1}}
\newcommand{\Link}[1]{\ensuremath{\mathsf{Link}~#1}}
\newcommand{\List}[1]{\ensuremath{[ #1 ]}}
\newcommand{\Set}[1]{\ensuremath{\{ #1 \}}}
\newcommand{\Map}[1]{\ensuremath{\{\!\mid #1 \mid\!\}}}
\newcommand{\FAppend}{\ensuremath{\text{++}}}
\newcommand{\FUpdate}[3]{\ensuremath{#1[#2 := #3]}}
\newcommand{\FDelete}[2]{\ensuremath{\FUpdate{F}{r}{\bot}}}
\newcommand{\PNil}{\ensuremath{\cdot}}
\newcommand{\PCons}[2]{\ensuremath{#1\,\textsf{/}\,#2}}
\newcommand{\Just}[1]{\ensuremath{\mathit{Just~#1}}}
\newcommand{\Nothing}{\ensuremath{\mathit{Nothing}}}
\newcommand{\True}{\ensuremath{\mathit{True}}}
\newcommand{\False}{\ensuremath{\mathit{False}}}
\newcommand{\fn}[2]{\ensuremath{#1(#2)}}
\newcommand{\Sk}{k_{\tau_1}^{\tau_2}}
\newcommand{\SAdhoc}[1]{\ensuremath{\mathsf{Adhoc}({#1})}}
\newcommand{\SPred}[1]{\ensuremath{\mathsf{P}(#1)}}
\newcommand{\SPath}[2]{\ensuremath{#1{::}#2}}
\newcommand{\SPair}[3]{\ensuremath{\langle #1 {:} #2, #3 \rangle}}
\newcommand{\SOption}[1]{\ensuremath{#1?}}
\newcommand{\SComp}[3]{\ensuremath{[ #1\mid#2:#3 ]}}
\newcommand{\Env}{\ensuremath{\mathcal{E}}}
\newcommand{\ENil}{\ensuremath{\emptyset}}
\newcommand{\yields}{\ensuremath{\rightsquigarrow}}
\newcommand{\valid}[1]{\ensuremath{\mathit{valid}(#1)}}
\newcommand{\typ}[1]{\ensuremath{\mathit{#1}}}
\newcommand{\meta}{\typ{att}}
\newcommand{\REP}{\ensuremath{\mathit{rep}}}
\newcommand{\MD}{\ensuremath{\mathit{md}}}
\newcommand{\md}[1]{\mathit{Md}~\ensuremath{#1}}
\newcommand{\eval}[3]{\ensuremath{[\![#1]\!]^{#2}_{#3}}}
\newcommand{\pfile}{\ensuremath{\mathsf{File}}}
\newcommand{\pdir}{\ensuremath{\mathsf{Dir}}}
\newcommand{\plink}{\ensuremath{\mathsf{Link}}}
\newcommand{\att}{\ensuremath{\mathit{a}}}
\newcommand{\defaultatt}{\ensuremath{\att_{\mathsf{default}}}}
\newcommand{\defaultmd}[1]{\ensuremath{d^{#1}_{\mathsf{default}}}}
\newcommand{\repty}[1]{{\cal R}[\![ #1 ]\!]}
\newcommand{\mdty}[1]{{\cal M}[\![ #1 ]\!]}
\newcommand{\loadkname}[1]{\ensuremath{\mathit{load}_{#1}}}
\newcommand{\storekname}[1]{\ensuremath{\mathit{store}_{#1}}}
\newcommand{\storek}[5]{\fn{\storekname{#1}}{#2,#3,#4,#5}}
\newcommand{\loadk}[4]{\fn{\loadkname{#1}}{#2,#3,#4}}
\newcommand{\stringty}{{string}}
\newcommand{\metapdty}{\meta}
\newcommand{\load}[5]{#1;#3;#4 \vdash \mathsf{load}~#2~\rhd~(#5) }
\newcommand{\store}[6]{#1;#3;#5 \vdash \mathsf{store}~(#2,#4)~\rhd~(#6) }
\newcommand{\tdots}{\ensuremath{..}}