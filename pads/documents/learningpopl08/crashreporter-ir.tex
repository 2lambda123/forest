\begin{figure}[t]
\begin{verbatim}
dumpreport =
  union {
    struct {
      "Started writing crash report to: "; 
      file:Ppath;
    };
    struct {
      "Finished writing crash report to: "; 
      file:Ppath;
    };
    struct {
      "Unable to determine task_t for pid: "; 
      pid:Pint32; " name: Exited process";
    };
    struct {
      "Failed to re-launch "; 
      file:Ppath; " - "; message:Pstring('\n')
    };
  };

reporterreport =
  struct {
    function: Ppath; " reply failed: ");
    failuremsg: Pstring_('\n'); 
  };

dateoption = 
  union {
    "- ";
    struct {
      day:    PDate;  " ";
      time:   PTime;  " ";
      year:   Pint32; " ";
    };
  };

source =
  arrayST {
    struct {
      date:   dateoption;
      kind:   enum {"crashdump"; 
                    "crashreporterd";}; "[";
      dumpid: Pint32; "]: ";
      report: 
        switch kind of {
          "crashdump"      => dumpreport
          "crashreporterd" => reporterreport
    };
  }['\n',EOF];
\end{verbatim}

\caption{Hand-written \ir{} Crashreporter description.}
\label{fig:crashreporter:ir}
\end{figure}
