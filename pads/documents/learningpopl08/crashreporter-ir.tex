\begin{figure}
\begin{verbatim}
dumpreport =
  union {
    struct {
      "Started writing crash report to: "; 
      file:Ppath;
    };
    struct {
      "Finished writing crash report to: "; 
      file:Ppath;
    };
    struct {
      "Unable to determine task_t for pid: "; 
      pid:Pint32; 
      " name: Exited process";
    };
    struct {
      "Failed to re-launch "; 
      file:Ppath; 
      " - "; 
      message:Pstring('\n')
    };
  };

reporterreport =
  struct {
    function: Ppath; 
    " reply failed: ");
    failuremsg: Pstring_('\n'); 
  };

source =
  arrayST {
    struct {
      date:   PDate;  " ";
      time:   PTime;  " ";
      year:   Pint32; " ";
      kind:   enum {"crashdump"; 
                    "crashreporterd";}; "[";
      dumpid: Pint32; "]: ";
      report: 
        switch kind of {
          "crashdump"      => dumpreport
          "crashreporterd" => reporterreport
    };
  }['\n',EOF];
\end{verbatim}

\caption{Hand-written \ir{} Crashreporter description.  
  Note: needs to be checked for correctness.  This was written by hand by Dave
  using the syntax of the paper, guided by the pads golden description, but deviating
  slightly by nesting instead of expanding definitions and altering base types to fit the
  base types available in the IR.  I also replaced Peor with 'backslash-n'...
can't to produce a backslash in tex.}
\label{fig:crashreporter:ir}
\end{figure}
