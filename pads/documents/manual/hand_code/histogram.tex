\begin{centercode}
#include "wsl.h"
#define DEF\_INPUT\_FILE  "data/wsl"
\mbox{}
\kw{int} main(\kw{int} argc, \kw{char}** argv) \{
  P\_t                   *pads;
  Pio\_disc\_t           *io\_disc;
  entry\_t               rep;
  entry\_t\_pd           pd;
  entry\_t\_m            mask;
  entry\_t\_hist         h;
  \kw{char}              *fname = DEF\_INPUT\_FILE;
\mbox{}
  io\_disc = P\_nlrec\_noseek\_make(0);
  P\_open(&pads, 0, io\_disc);
\mbox{}
  entry\_t\_init(pads, &rep);
  entry\_t\_pd\_init(pads, &pd);
  entry\_t\_m\_init(pads, &mask, P\_CheckAndSet);
\mbox{}
  \kw{if} (P\_ERR == P\_io\_fopen(pads, fname)) \{
    error(2, "*** P\_io\_fopen failed ***");
    \kw{return} -1;
  \}
\mbox{}
  entry\_t\_hist\_init(pads, &h);
  \kw{while} (!P\_io\_at\_eof(pads)) \{
    entry\_t\_read(pads, &mask, &pd, &rep);
    entry\_t\_hist\_add(pads, &h, &pd, &rep);
  \};
  entry\_t\_hist\_report(pads, &h);
\mbox{}
  P\_io\_close(pads);
  entry\_t\_cleanup(pads, &rep);
  entry\_t\_pd\_cleanup(pads, &pd);
  entry\_t\_hist\_cleanup(pads, &h);
  P\_close(pads);
  \kw{return} 0;
\}
\end{centercode}
