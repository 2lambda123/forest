\chapter{Accumulators}
\label{chap:accumulators}
\cutname{accumulators.html}

Accumulators summarize data inserted into them.  They are useful for
quickly computing a ``bird's-eye'' view of a given data source.  For
each piece of a \pads{} description, the accumulator summarizes the
percentage of errors seen and reports the most frequently seen values.
For example, 
when run on sample web server log data, 
the accumulator report for the length field contains the information
shown in \figref{figure:wsl-accum-report-2}.
%
\begin{figure*}
\begin{small}
\begin{verbatim}
<top>.length : uint32
+++++++++++++++++++++++++++++++++++++++++++
good: 53544   bad: 3824    pcnt-bad: 6.666
min: 35  max: 248591  avg: 4090.234
top 10 values out of 1000 distinct values:
tracked 99.552% of values
 val:  3082 count:  1254  %-of-good:  2.342
 val:   170 count:  1148  %-of-good:  2.144
 val:    43 count:  1018  %-of-good:  1.901
 val:  9372 count:   975  %-of-good:  1.821
 val:  1425 count:   896  %-of-good:  1.673
 val:   518 count:   893  %-of-good:  1.668
 val:  1082 count:   881  %-of-good:  1.645
 val:  1367 count:   874  %-of-good:  1.632
 val:  1027 count:   859  %-of-good:  1.604
 val:  1277 count:   857  %-of-good:  1.601
. . . . . . . . . . . . . . . . . . . . . . 
 SUMMING    count:  9655  %-of-good: 18.032
\end{verbatim}
\end{small}
\caption{Portion of accumulator report for length field of web server
  log data.}
\label{figure:wsl-accum-report-2}
\end{figure*}
%
By default, accumulators track the first 1000 distinct
values seen in the data source and report the frequency
of the top ten values.  In this particular run, 99.552\%
of all values were tracked. 

\figref{figure:accumulators} shows the collection of accumulator
functions provided for each \pads{} type.
\begin{figure}
\inputCode{code/accumulator}
\caption{Accumulator functions generated for the \texttt{entry\_t}
  type.}
\label{figure:accumulators}
\end{figure}
%

