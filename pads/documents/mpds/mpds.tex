\documentclass[10pt]{article}

\usepackage{times}
\usepackage{code} 
\input{defs}
\setlength{\textwidth}{6.5in}
\setlength{\oddsidemargin}{0in}
\setlength{\evensidemargin}{0in}
\setlength{\parskip}{5pt}

\title{PADS: Processing Arbitrary Data Streams}
\date{\today}
\author{
  Kathleen Fisher\\
  AT\&T Labs --- Research \\
  \small\texttt{kfisher@research.att.com}
\and
  Robert E. Gruber \\
  AT\&T Labs --- Research \\
  \small\texttt{gruber@research.att.com}
}

\begin{document}

\maketitle
\thispagestyle{empty}

\section{Introduction}
  stock market transactions, credit card records, call-detail records
  electronic fund transfers, web server logs, provisioning records.
information in such streams can be mined very profitably 
\cite{kdd98,kdd99,kdd00}
high volume: sizes of dibbler, call detail streams
but, often arrives "as is" and in ad hoc formats:
  people mining the data typically cannot control format of data
  ascii based, binary, cobol-based, ibm

data often contains errors:
 errors may be the most interesting part of data, 
 but complicates parsing.

Understanding a new data stream and writing a suitable
parser are difficult tasks, both tedious and error-prone.
Often, the hard-won understanding of the data ends
up embedded in parsing code, making long-term maintenance difficult
for the original writer and sharing the knowledge with others 
nearly impossible.

The goal of the PADS project is to provide languages and tools for
simplifying data stream analysis.  We have a preliminary design of a
declarative data-description language, PADSL, expressive enough to
describe the data feeds we see at AT\&T in practice, including both ASCII,
binary, and mixed data.  From PADSL we generate a tunable C library with
functions for parsing, manipulating, and summarizing the data.  The
library is immediately useful for those who write C programs to
manipulate data streams.  

\section{\pads{} language}
use as an example common-log format records (describe):
\begin{verbatim}
207.136.97.49 - - [15/Oct/1997:18:46:51 -0700] "GET /tk/am.gif HTTP/1.0" 200 3013
\end{verbatim}

specification:
 include complete information about data stream
 physical layout and semantic constraints
 rough analogy to C type structure:
   extensible set of base types for reading atomic data
   structs for record-like structure
   unions for alternatives (in-place, switched)
   arrays for sequences

   examples

\begin{code}
\kw{pstruct} http_request_t \{
  '\\"'; http_method_t  meth;            /- Method used during request
  ' ';  astring(:' ':) req_uri;         /- Requested uri.
  ' ';  http_v_t       version : checkVersion(version, meth);
                                        /- HTTP version number of request 
  '\\"';
\};

\kw{punion} auth_id_t \{
  achar unauthorized : unauthorized == '-';  /- non-authenticated http session
  astring(:' ':) id;                   /- login supplied during authentication
\};
\end{code}
what gets generated for each type in pads description:
\begin{itemize}
\item in-memory representation
\item error mask
\item error description
\item read functions (and more)
\end{itemize}
Notes:
 multiple entry points to accomodate large scale data
   file-level for small files
   read-header while more-records, read-record, read trailer
parse functions take error mask as argument,
error mask allows user to turn off checking.
parse functions return in-memory rep and error description,
high-bit saying if any error occurred during parsing.

Our next steps include using the library as
input to tools that query and aggregate data.  Our ultimate goal is
for data analysts to write just the declarative description of the
data and declarative queries -- no coding required.  Further, by
providing a means of describing all of Research's incoming data
streams using a common language, we open the possibility of
correlating and integrating the data from these streams.


\section{Related work}
 xml
 traditional databases
 ASN.1 (flip side: describe logical, generate physical and tools for 
        reading/pretty printing in a number of different languages)
 \cite{asn}
 \cite{asdl}

 Satish (\cite{sigcomm00})
 trevor's email(\cite{erlang-bit-syntax})
 Godmar (\cite{gpce02}):
  bit/binary layout with constraints
  use of overlays
  treatment of errors

\section{Conclusion}
Available for download with non-commercial use license from:
\texttt{http://www.research.att.com/projects/pads}
\bibliographystyle{jhr-alpha} 
\bibliography{mpds}
\end{document}
*****************************************
Questions:
 1. should we generate a isFoo predicate for each PADS type foo?

Other issues

??queries are often ad hoc & transient:
  ??what is happening this week? next week a different question.
